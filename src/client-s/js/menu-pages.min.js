(function(b){var a={namespace:"intellicache"},d=b(window),c=b(document);a.onReady=function(){
/*![pro strip-from='lite']*/
;a.statsData=null;a.statsRunning=false;
/*![/pro]*/
;a.$menuPage=b("#plugin-menu-page");a.vars=window[a.namespace+"_menu_page_vars"];b(".plugin-menu-page-panel-heading",a.$menuPage).on("click",a.togglePanel);b(".plugin-menu-page-panels-open",a.$menuPage).on("click",a.toggleAllPanelsOpen);b(".plugin-menu-page-panels-close",a.$menuPage).on("click",a.toggleAllPanelsClose);b("[data-action]",a.$menuPage).on("click",a.doDataAction);b("[data-toggle-target]",a.$menuPage).on("click",a.doDataToggleTarget);b('select[name$="_enable\\]"]',a.$menuPage).not(".-no-if-enabled").on("change",a.enableDisable).trigger("change");
/*![pro strip-from='lite']*/
;b('textarea[name$="[cdn_hosts]"]',a.$menuPage).on("input propertychange",a.handleCdnHostsChange);b(".plugin-menu-page-clear-cdn-cache",a.$menuPage).on("click",a.clearCdnCacheViaAjax);
/*![pro strip-from='lite']*/
;b(".-cache-clear-admin-bar-options select",a.$menuPage).on("change",a.handleCacheClearAdminBarOpsChange).trigger("change");
/*![pro strip-from='lite']*/
;if(b(".plugin-menu-page-stats",a.$menuPage).length){b(".plugin-menu-page-stats-button").on("click",a.statsRefresh);a.stats()}
/*![/pro]*/
};a.toggleAllPanelsOpen=function(e){a.preventDefault(e);b(".plugin-menu-page-panel-heading",a.$menuPage).addClass("open").next(".plugin-menu-page-panel-body").addClass("open")};a.toggleAllPanelsClose=function(e){a.preventDefault(e);b(".plugin-menu-page-panel-heading",a.$menuPage).removeClass("open").next(".plugin-menu-page-panel-body").removeClass("open")};a.togglePanel=function(e){a.preventDefault(e);b(this).toggleClass("open").next(".plugin-menu-page-panel-body").toggleClass("open")};a.doDataAction=function(e){a.preventDefault(e);var g=b(this),f=g.data();if(typeof f.confirmation!=="string"||confirm(f.confirmation)){location.href=f.action}};a.enableDisable=function(e){var m=b(this),g=m.val(),f=m.attr("name"),l=Number(g)>=1,i=m.closest(".plugin-menu-page-panel-body"),n=m.data("target"),h=n?b(n,i).filter(".plugin-menu-page-panel-if-enabled"):null,k=m.closest(".plugin-menu-page-panel-if-enabled"),j=k.find("> .plugin-menu-page-panel-if-enabled"),o=i.find("> .plugin-menu-page-panel-if-enabled");if(l){if(n){h.css("opacity",1).find(":input").removeAttr("readonly")}else{if(k.length){j.css("opacity",1).find(":input").removeAttr("readonly")}else{o.css("opacity",1).find(":input").removeAttr("readonly")}}}else{if(n){h.css("opacity",0.4).find(":input").attr("readonly","readonly")}else{if(k.length){j.css("opacity",0.4).find(":input").attr("readonly","readonly")}else{o.css("opacity",0.4).find(":input").attr("readonly","readonly")}}}};a.doDataToggleTarget=function(f){a.preventDefault(f);var g=b(this),e=b(g.data("toggleTarget"));if(e.is(":visible")){e.hide();g.find(".si").removeClass("si-eye-slash").addClass("si-eye")}else{e.show();g.find(".si").removeClass("si-eye").addClass("si-eye-slash")}};a.handleCacheClearAdminBarOpsChange=function(g){var f=b(this),h=f.val(),e=b(".-clear-cache-ops-ss",a.$menuPage);e.attr("src",e.attr("src").replace(/ops[0-9]\-ss\.png$/,"ops"+h+"-ss.png"))};a.handleCdnHostsChange=function(f){var g=b(this),e=b('input[name$="[cdn_host]"]',a.$menuPage);if(b.trim(g.val())){if(e.val()){e.data("hiddenValue",e.val())}e.attr("disabled","disabled").val("")}else{if(!e.val()){e.val(e.data("hiddenValue"))}e.removeAttr("disabled");g.val("")}};
/*![pro strip-from='lite']*/
;a.clearCdnCacheViaAjax=function(f){a.preventDefault(f);var g=b(this),e={_wpnonce:a.vars._wpnonce};e[a.namespace]={ajaxClearCdnCache:"1"};g.attr("disabled","disabled");b.post(a.vars.ajaxURL,e,function(h){alert(b(h.replace(/\<\/p\>\<p\>/gi,"</p> <p>")).text());g.removeAttr("disabled")})};
/*![pro strip-from='lite']*/
;a.stats=function(w){a.preventDefault(w);if(a.statsRunning){return}a.statsRunning=true;var u=b("body"),r=b(".plugin-menu-page-stats",a.$menuPage),z=r.find(".-wrapper"),v=z.find(".-container"),f=v.find(".-refreshing"),i=v.find(".-totals"),m=i.find(".-files"),y=i.find(".-size"),j=i.find(".-dir"),h=v.find(".-disk"),n=h.find(".-free"),p=h.find(".-size"),l=v.find(".-system"),o=l.find(".-memory-usage"),s=l.find(".-load-average"),g=v.find(".-chart-a"),e=v.find(".-chart-b"),t=v.find(".-opcache"),x=t.find(".-memory"),k=t.find(".-totals"),q=t.find(".-hits-misses");var A=function(){f.show();i.hide();if(b.trim(j.text()).length>30){j.hide()}h.hide();l.hide();o.hide();s.hide();g.hide();e.hide();t.hide();if(!a.statsData){var C={_wpnonce:a.vars._wpnonce};C[a.namespace]={ajaxStats:"1"};b.post(a.vars.ajaxURL,C,function(D){console.log("Menu Page :: statsData :: %o",D);a.statsData=D;B()})}else{setTimeout(B,500)}},B=function(){if(!a.statsData){a.statsRunning=false;return}f.hide();g.css("display","block");e.css("display","block");var ac=null,ab=null,X=null,ad=null;var F=a.statsData.largestCacheSize.size,O=a.statsData.largestCacheSize.days,H=a.statsData.largestCacheCount.count,W=a.statsData.largestCacheCount.days,U=a.statsData.forCache.stats.total_links_files,af=a.statsData.forHtmlCCache.stats.total_links_files,I=U+af,M=a.statsData.forCache.stats.total_size,Q=a.statsData.forHtmlCCache.stats.total_size,S=M+Q,R=a.statsData.forCache.stats.disk_total_space,N=a.statsData.forCache.stats.disk_free_space,P=a.statsData.sysLoadAverages,ae=a.statsData.sysMemoryStatus,V=a.statsData.sysOpcacheStatus,J=0,aa=0,C=0,L=0,G=0,T=0;if(a.vars.isMultisite&&a.vars.currentUserHasNetworkCap){J=a.statsData.forHostCache.stats.total_links_files;aa=a.statsData.forHtmlCHostCache.stats.total_links_files;C=J+aa;L=a.statsData.forHostCache.stats.total_size;G=a.statsData.forHtmlCHostCache.stats.total_size;T=L+G}var D=function(ak,ai){if(!(ak instanceof Array)){return{}}if(typeof ai!=="number"||ai<=0){ai=10}var ah=[];b.each(ak,function(an,ao){ah.push(Number(ao.value))});var am=0,aj=Math.min.apply(null,ah),ag=Math.max.apply(null,ah),al=Math.ceil((ag-am)/ai);return{scaleSteps:ai,scaleStartValue:am,scaleStepWidth:al,scaleIntegersOnly:true,scaleOverride:true}},K={responsive:true,maintainAspectRatio:true,animationSteps:35,scaleFontSize:14,scaleShowLine:true,scaleFontFamily:"sans-serif",scaleShowLabelBackdrop:true,scaleBackdropPaddingY:2,scaleBackdropPaddingX:4,scaleFontColor:"rgba(0,0,0,1)",scaleBackdropColor:"rgba(255,255,255,1)",scaleLineColor:"rgba(0,0,0,0.15)",scaleLabel:function(ag){return a.numberFormat(Number(ag.value))+" "+(ag.value===1?a.vars.i18n.file:a.vars.i18n.files)},tooltipFontSize:18,tooltipFillColor:"rgba(0,0,0,1)",tooltipFontFamily:"Georgia, serif",tooltipTemplate:function(ag){return ag.label+": "+a.numberFormat(Number(ag.value))+" "+(ag.value===1?a.vars.i18n.file:a.vars.i18n.files)},segmentShowStroke:true,segmentStrokeWidth:2,segmentStrokeColor:"rgba(255,255,255,1)"},Z=b.extend({},K,{scaleLabel:function(ag){return a.bytesToSizeLabel(Number(ag.value))},tooltipTemplate:function(ag){return ag.label+": "+a.bytesToSizeLabel(Number(ag.value))}});var E=[],Y=[];E.push({value:H,label:a.vars.i18n.xDayHigh.replace("%s",W),color:"#ff5050",highlight:"#c63f3f"});E.push({value:I,label:a.vars.i18n.currentTotal,color:"#46bf52",highlight:"#33953e"});E.push({value:U,label:a.vars.i18n.pageCache,color:"#0096CC",highlight:"#057ca7"});E.push({value:af,label:a.vars.i18n.htmlCompressor,color:"#FFC870",highlight:"#d6a85d"});if(a.vars.isMultisite&&a.vars.currentUserHasNetworkCap){E.push({value:C,label:a.vars.i18n.currentSite,color:"#46bfb4",highlight:"#348f87"})}b.extend(K,D(E));Y.push({value:F,label:a.vars.i18n.xDayHigh.replace("%s",O),color:"#ff5050",highlight:"#c63f3f"});Y.push({value:S,label:a.vars.i18n.currentTotal,color:"#46bf52",highlight:"#33953e"});Y.push({value:M,label:a.vars.i18n.pageCache,color:"#0096CC",highlight:"#057ca7"});Y.push({value:Q,label:a.vars.i18n.htmlCompressor,color:"#FFC870",highlight:"#d6a85d"});if(a.vars.isMultisite&&a.vars.currentUserHasNetworkCap){Y.push({value:T,label:a.vars.i18n.currentSite,color:"#46bfb4",highlight:"#348f87"})}b.extend(Z,D(Y));if((ac=r.data("chartA"))){ac.destroy()}if((ab=r.data("chartB"))){ab.destroy()}if((X=r.data("chartADimensions"))){g.find(".-canvas").attr("width",parseInt(X.width)).attr("height",parseInt(X.height)).css(X)}if((ad=r.data("chartBDimensions"))){e.find(".-canvas").attr("width",parseInt(ad.width)).attr("height",parseInt(ad.height)).css(ad)}if(g.length&&E[0].value>0){g.find(".-heading, .-canvas").show(),g.find(".-empty").hide();ac=new Chart(g.find(".-canvas")[0].getContext("2d")).PolarArea(E,K);r.data("chartA",ac).data("chartADimensions",{width:g.find(".-canvas").width()+"px",height:g.find(".-canvas").height()+"px"})}else{g.find(".-heading, .-canvas").hide(),g.find(".-empty").show();g.find(".-empty").html('<img style="width:100%;" src="'+a.escHtml(a.vars.emptyStatsCountsImageUrl)+'" />')}if(e.length&&Y[0].value>0){e.find(".-heading, .-canvas").show(),e.find(".-empty").hide();ab=new Chart(e.find(".-canvas")[0].getContext("2d")).PolarArea(Y,Z);r.data("chartB",ab).data("chartBDimensions",{width:e.find(".-canvas").width()+"px",height:e.find(".-canvas").height()+"px"})}else{e.find(".-heading, .-canvas").hide(),e.find(".-empty").show();e.find(".-empty").html('<img style="width:100%;" src="'+a.escHtml(a.vars.emptyStatsFilesImageUrl)+'" />')}i.show();m.find(".-value").html(a.escHtml(a.numberFormat(I)+" "+(I===1?a.vars.i18n.file:a.vars.i18n.files)));y.find(".-value").html(a.escHtml(a.bytesToSizeLabel(S)));h.show();p.find(".-value").html(a.escHtml(a.bytesToSizeLabel(R)));n.find(".-value").html(a.escHtml(a.bytesToSizeLabel(N)));if(ae){l.show();o.show().find(".-value").html(a.escHtml(ae.percentage))}if(P){l.show();s.show().find(".-value").html(a.escHtml(P[0].toFixed(2)))}if(V){t.show();x.find(".-free .-value").html(a.bytesToSizeLabel(V.memory_usage.free_memory));x.find(".-used .-value").html(a.bytesToSizeLabel(V.memory_usage.used_memory));x.find(".-wasted .-value").html(a.bytesToSizeLabel(V.memory_usage.wasted_memory));k.find(".-scripts .-value").html(a.numberFormat(a.numberFormat(V.opcache_statistics.num_cached_scripts)));k.find(".-keys .-value").html(a.numberFormat(a.numberFormat(V.opcache_statistics.num_cached_keys)));q.find(".-hits .-value").html(a.numberFormat(V.opcache_statistics.hits));q.find(".-misses .-value").html(a.numberFormat(V.opcache_statistics.misses));q.find(".-hit-rate .-value").html(V.opcache_statistics.opcache_hit_rate.toFixed(2)+a.vars.i18n.perSymbol)}a.statsRunning=false};A()};a.statsRefresh=function(e){a.preventDefault(e);a.statsData=null;a.stats()};
/*![/pro]*/
;a.bytesToSizeLabel=function(f,e){if(typeof f!=="number"||f<=1){return f===1?"1 byte":"0 bytes"}if(typeof e!=="number"||e<=0){e=0}var i=1024,j=Math.floor(Math.log(f)/Math.log(i)),h=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],g=(f/Math.pow(i,j));return g.toFixed(e)+" "+h[j]};a.numberFormat=function(f,e){if(typeof f!=="number"){return String(f)}if(typeof e!=="number"||e<=0){e=0}return f.toFixed(e).replace(/./g,function(g,i,h){return i&&g!=="."&&((h.length-i)%3===0)?","+g:g})};a.escHtml=function(f){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(f).replace(/[&<>"']/g,function(g){return e[g]})};a.preventDefault=function(f,e){if(!f){return}f.preventDefault();if(e){f.stopImmediatePropagation()}};c.ready(a.onReady)})(jQuery);